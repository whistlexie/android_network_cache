## 哈你直播分析报告（一）

#### 基本发展情况

陌陌直播业务在2015年九月上线，名为直播现场，从2015年9月上线陌陌现场，2015年12月开通红人直播，2016年4月全面开放全民直播；

根据新浪财经的消息：陌陌近日发布的第三季度财报显示，公司净营收为1.57亿美元，同比增长319%。来自直播服务产生的营收为1.086亿美元，直播服务业绩表现突出，占了总营收的69.17%。而在陌陌单独公开直播收入的前两季的占比分别为30.65%和58.48%，一路水涨船高。

根据猎豹智联库的数据显示，现在app中内嵌有直播业务的，日活app排名如下，陌陌在加入直播业务之后，表现非常惊人，在更大直播平台还在拼命烧钱的时候，陌陌的直播业务已经实现了高盈利；

当然，排除运营，内容和社区影响之外，我更关注的是陌陌直播-哈你直播的技术。

![1477931452-8361-E277CUxfh11S3ENeJCAKzQmRic2g](http://www.199it.com/wp-content/uploads/2016/11/1477931452-8361-E277CUxfh11S3ENeJCAKzQmRic2g.png)





### 产品体验

相关信息

| 参数    | 内容                                 |
| ----- | ---------------------------------- |
| 体验版本  | android 端 1.7 （2016.12.12号前最新版）    |
| 体验机型  | 魅族 xm 5 / flyme 5.0.1 基于anroid 5.0 |
| 体验人   | android 开发工程师                      |
| 体验者特性 | 无观看直播爱好，但其它方面娱乐爱好较多                |

##### 注册和登录

哈你直播，把登录页面放在了隐藏位置，在你点击用户信息的时候，如果发现没有登录的话，启动一个类似于 dialog 的窗口，如下图：



###### 注册

哈你直播，通过手机号注册，简单的测试下发送验证码的时间：

| 发送次数         | 时间   |
| ------------ | ---- |
| 第一次          | 15秒  |
| 第二次          | 丢失   |
| 第三次          | 丢失   |
| 第四次（隔了一段时间后） | 7秒   |

这里可能是后台做了限制，我在十分钟内，点击好好几次发送验证码，只收到了一条，这点体验待校验。



##### 登录

哈你直播主要提供了三种登录方式

1. 本身注册的系统用户登录
2. 陌陌帐号登录
3. 其它第三方帐号登录，例如微信，QQ，微博

登录界面还算简洁，这里值得一提的是，配置了使用陌陌帐号登录的情况下，配置了安全校验登录，而不是让用户自己输入陌陌帐号密码（因为我手机本身安装了陌陌，并且已经存在登录信息），这点的话是很好的用户体验，为什么这样说呢？

// 哈你直播登录



这里的话，对哈你直播来说，陌陌的引流作用不可忽视.陌陌本身作为社交性质的软件，从社交到直播，过渡是相对自然的，也可以说，直播也可以看到是社交的一个分支，通过直播可以拉近，粉丝和主播之间的社交关系，实际上也是一种社交手段的进步。



###### 从用户系统来看陌陌引流的作用

在哈你直播上，可以直接看到陌陌好友的直播情况，这是我其中一个好友的直播情况：

// 

有不到八百的粉丝数量，然后，我简单的统计了一下，我陌陌好友的粉丝情况：



| 好友性质    | 粉丝数  |
| ------- | ---- |
| 女生，美女   | 777  |
| 知性女生，美女 | 24   |
| 女生，开朗   | 542  |
| 女生，舞蹈老师 | 88   |
| 离异妇女，健身 | 508  |
| 女生，美女   | 522  |
| 男生，户外运动 | 2563 |
| 女生，文艺青年 | 221  |
| 女生      | 293  |

从上面的数据简单来看，陌陌对哈你的引流还是比较明显的，而且陌陌app里面，本身自带着哈你直播的入口，但是要想看到准确的引流作用，还需要进一步的数据调查和分析，这里由于拿不到数据，不可而知。



#### 哈你直播主页面

主页面是三个 Tab 

* Tab 首页：显示的是三个标签内容的直播列表-新人，热门，附近。吐槽的是，tab设计有点诡异，看起来是 tab，但是行为和外观更像按钮；
* Tab 开播：进入这个 Tab，便可以开播，这个需求似乎是刚需；和其它的直播平台略为不同的是，成为主播并不需要审核。这点产品定位的话，无疑会吸引了一堆想要成为主播的人群；也许在用户原创内容论大肆流行的今天，这种产品设计会吸引更多的人群进入直播行业，但是不可避免的时，缺乏审核的挑选，内容质量参差不齐，甚至可能涉黄，犯法犯规。所以，总的来说，这点利弊均在。
* Tab 个人:这里我的哈你直播号是 62740431，从这里推断，我大概是第 62740431 个用户；个人信息页面并没有太多的可分析点；



总的来说，哈你直播主页面简洁明了，不会存在太多的功能隐藏区，像现在很多的 APP，随着APP的发展，功能越来越多，很多时候，用户需要需找一个功能，需要花费较多的时间，或者有些时候，app 推出了一个新功能，如果 app 不在首页进行说明或者推动，用户可能完全察觉不到这个新功能。所以，哈你直播，作为一个社交定位的直播 APP，在主页的功能逻辑设计上，还是比较好的。



#### 直播列表

对于一个普通直播用户来说，在一个直播app停留时间最长的无非是两个页面，一是直播列表页面，用户在选择或者浏览直播情况，二是直播间；

那么一个直播内容显示列表的良好用户体验都有那些呢？个人看法如下：

1. 内容，显示足够说明直播情况的内容；
2. 用户体验度，这里包括良好的交互，高质量的显示图片，流畅的滑动和加载
3. 其它，标签是否清晰分明；是否有推荐功能；



从技术的层面分析，上面这些指标要达到良好，需要优化以下关注点：

1. 列表加载的优化，包括卡顿，滑动优化，加载机制的优化
2. 图片框架的优化，因为列表显示的主要内容就是图片，所以加载框架是决定因素。
3. 弱网络的优化加载，检验性能的瓶颈问题。
4. 内存正常，无抖动，无溢出
5. View 的正常复用



#### 直播间

作为直播app，直播间



### 技术分析

通过一些神秘手段，大概把哈你直播的源码和资源给还原了出来，由于源码使用了混淆，所以恢复出来的可读度并不是很高，然后就是资源文件的恢复，根据资源恢复情况，可以看出哈你直播是没有进行加固的，如果进行了加固，资源是没办法通过 apktool 恢复的；

安全情况如下：

| 安全技术       | 是否使用 |
| ---------- | ---- |
| 代码混淆       | 有    |
| JAR混淆      | 有    |
| 加固（资源文件加固） | 无    |



#### 源码分析

哈你直播这边，解压出 apk 产生了两个 dex 文件，反编译结果如下：



* 哈你使用了  crashlytics 框架去收集崩溃日志
* 哈你使用了 OKHTTP + Retofit 作为网络框架
* 哈你使用了 EventBus 事件框架
* 哈你的图片加载框架 ：






##### 网络框架对比



| 参数         | 哈你     | 酷狗直播                     |
| ---------- | ------ | ------------------------ |
| 是否支持http缓存 | 支持     | 不支持                      |
| 是否有缓存功能    | http缓存 | 有简单的文件缓存功能，可以缓存 JSON 字符串 |
| 是否支持 spdy  | 支持     | 不支持                      |
| 网络请求是否可以取消 | 支持     | 不支持                      |
| 是否存在多级缓存   | 支持     | 不支持                      |
| 是否支持https  | 支持     | 不明确                      |
| jar 包大小    |        |                          |
|            |        |                          |
|            |        |                          |

这里把关注点放在，前六个特点；



屏幕适配方案



#### 资源处理方案

资源处理方案，包括了图片资源，字符串资源，动画资源等

##### 图片分辨率方案

图片通过Bitmap 显示在各种控件上，先来简单捋一下，bitmap，drawable，BitmapDrawable 之间的关系；

简单来说，Drawable 就是可以绘制的对象，可能是 BitmapDrawable，可能是ShapeDrawable等等，常见的Drawable 类型如下：

* BitmapDrawable : 由png，gif，jpg等格式文件创建的可绘制对象
* NinePatchDrawable : 由内容可以拉伸的.9 png 文件生成的可绘制对象
* ShapeDrawable : 此类 XML 文件用于定义几何形状（包括颜色和渐变)
* StateListDrawable: 此类 XML 文件为不同状态引用不同位图图形（例如，按下按钮时使用不同的图像） 
* 等等-----


注意：Color 颜色资源也可以作为 Drawable 对象使用

这里意味着，你在 Drawable 文件夹下放置的图片文件会被装换成 BitmapDrawable  和 NinePatchDrawable  对象，然后绘制在控件上面。




参看：https://developer.android.com/guide/topics/resources/drawable-resource.html

